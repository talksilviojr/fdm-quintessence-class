<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FDM + Quintessence CLASS - C√≥digo Completo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        nav {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        nav button {
            padding: 10px 20px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        nav button:hover {
            background: #667eea;
            color: white;
        }
        
        nav button.active {
            background: #667eea;
            color: white;
        }
        
        .content {
            padding: 30px;
        }
        
        .file-section {
            display: none;
        }
        
        .file-section.active {
            display: block;
        }
        
        .file-header {
            background: #f5f5f5;
            padding: 15px 20px;
            border-left: 4px solid #667eea;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        
        .file-header h2 {
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .file-header p {
            color: #666;
            font-size: 0.9em;
        }
        
        pre {
            background: #1e1e1e;
            border-radius: 5px;
            padding: 15px;
            overflow-x: auto;
            margin-bottom: 30px;
        }
        
        code {
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.5;
        }
        
        .hljs {
            background: #1e1e1e !important;
        }
        
        .stats {
            background: #f0f7ff;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .stat-item .number {
            font-size: 2em;
            color: #667eea;
            font-weight: bold;
        }
        
        .stat-item .label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        footer {
            background: #f8f9fa;
            padding: 20px 30px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #666;
        }
        
        .breadcrumb {
            color: #999;
            margin-bottom: 15px;
            font-size: 0.9em;
        }
        
        .description {
            background: #f9f9f9;
            padding: 20px;
            border-left: 4px solid #667eea;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        
        .description h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .description ul {
            list-style: none;
            padding-left: 0;
        }
        
        .description li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .description li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üåå FDM + Quintessence Cosmology Simulator</h1>
            <p>C√≥digo Completo - CLASS Modificado</p>
        </header>
        
        <nav>
            <button class="nav-btn active" onclick="showSection('visao-geral')">üìã Vis√£o Geral</button>
            <button class="nav-btn" onclick="showSection('cosmology')">üî¨ cosmology.py</button>
            <button class="nav-btn" onclick="showSection('app')">üé® app.py</button>
            <button class="nav-btn" onclick="showSection('eqs')">‚öôÔ∏è Equa√ß√µes</button>
        </nav>
        
        <div class="content">
            <!-- Vis√£o Geral -->
            <div id="visao-geral" class="file-section active">
                <div class="file-header">
                    <h2>üìã Estrutura do Projeto</h2>
                    <p>Resumo completo da aplica√ß√£o e seus componentes</p>
                </div>
                
                <div class="description">
                    <h3>‚ú® Caracter√≠sticas Principais</h3>
                    <ul>
                        <li><strong>Simula√ß√£o de Cosmologia:</strong> Evolu√ß√£o do background cosmol√≥gico com FDM + Quintess√™ncia</li>
                        <li><strong>Interface Web:</strong> Streamlit para controle interativo de par√¢metros</li>
                        <li><strong>Solver Num√©rico:</strong> Scipy.integrate.solve_ivp com m√©todo RK45</li>
                        <li><strong>Visualiza√ß√£o:</strong> Gr√°ficos interativos com Plotly</li>
                        <li><strong>Exporta√ß√£o:</strong> Download de dados em CSV</li>
                    </ul>
                </div>
                
                <div class="description">
                    <h3>üõ†Ô∏è Componentes T√©cnicos</h3>
                    <ul>
                        <li><strong>cosmology.py:</strong> L√≥gica de c√°lculo das equa√ß√µes cosmol√≥gicas</li>
                        <li><strong>app.py:</strong> Interface Streamlit e visualiza√ß√£o</li>
                        <li><strong>Depend√™ncias:</strong> numpy, scipy, pandas, plotly, streamlit</li>
                    </ul>
                </div>
                
                <div class="description">
                    <h3>üìä Modelos Suportados</h3>
                    <ul>
                        <li>ŒõCDM (Modelo padr√£o)</li>
                        <li>Quintess√™ncia (potencial PNGB)</li>
                        <li>Fuzzy Dark Matter (campo escalar ultra-leve)</li>
                        <li>FDM + Quintess√™ncia (modelo din√¢mico completo)</li>
                    </ul>
                </div>
                
                <div class="stats">
                    <div class="stat-item">
                        <div class="number">375</div>
                        <div class="label">Linhas em cosmology.py</div>
                    </div>
                    <div class="stat-item">
                        <div class="number">436</div>
                        <div class="label">Linhas em app.py</div>
                    </div>
                    <div class="stat-item">
                        <div class="number">2000</div>
                        <div class="label">Pontos integrados</div>
                    </div>
                    <div class="stat-item">
                        <div class="number">4</div>
                        <div class="label">Abas de Resultados</div>
                    </div>
                </div>
            </div>
            
            <!-- cosmology.py -->
            <div id="cosmology" class="file-section">
                <div class="file-header">
                    <h2>üî¨ cosmology.py</h2>
                    <p>Motor de c√°lculo das equa√ß√µes cosmol√≥gicas com FDM e Quintess√™ncia</p>
                </div>
                
                <div class="description">
                    <h3>üìù Descri√ß√£o</h3>
                    <ul>
                        <li>Implementa as equa√ß√µes de Friedmann com FDM e Quintess√™ncia</li>
                        <li>Usa integra√ß√£o num√©rica em log(a) para estabilidade</li>
                        <li>Trata FDM com aproxima√ß√£o de fluido</li>
                        <li>Suporta potencial PNGB para quintess√™ncia</li>
                    </ul>
                </div>
                
                <pre><code class="language-python">"""
Cosmological Background Evolution with FDM + Quintessence
Based on the CLASS modification by Silvio A. Corr√™a Junior

Este arquivo cont√©m:
- CosmologyParams: Classe de par√¢metros cosmol√≥gicos
- BackgroundEvolution: Solver ODE das equa√ß√µes cosmol√≥gicas
- compute_cosmology: Fun√ß√£o de conveni√™ncia para c√°lculos
"""

import numpy as np
from scipy.integrate import solve_ivp
from dataclasses import dataclass

# Constantes f√≠sicas
C_LIGHT = 299792.458  # km/s
H0_UNITS = 100.0  # km/s/Mpc per h
M_PL = 2.435e18  # Reduced Planck mass in GeV

@dataclass
class CosmologyParams:
    """Par√¢metros cosmol√≥gicos para evolu√ß√£o de fundo"""
    # Hubble
    h: float = 0.67
    
    # Densidades
    Omega_b: float = 0.05
    Omega_cdm: float = 0.25
    Omega_g: float = 5.38e-5
    Omega_ur: float = 3.76e-5
    
    # Quintess√™ncia
    has_quintessence: bool = False
    M_quint: float = 1.5e-3
    f_quint: float = 1.0
    phi_ini: float = 0.1
    
    # FDM
    has_fdm: bool = False
    m_Psi: float = 1e-22
    Omega_fdm: float = 0.25

class BackgroundEvolution:
    """Resolve as equa√ß√µes de fundo cosmol√≥gicas"""
    
    def __init__(self, params: CosmologyParams):
        self.params = params
        self.solution = None
    
    def _E_squared(self, a, phi=0, phi_dot=0):
        """Equa√ß√£o de Friedmann: E¬≤(a) = H¬≤(a)/H‚ÇÄ¬≤"""
        E2 = 0.0
        E2 += (self.params.Omega_g + self.params.Omega_ur) / a**4
        E2 += self.params.Omega_b / a**3
        E2 += self.params.Omega_cdm / a**3
        return E2
    
    def solve(self):
        """Resolve a evolu√ß√£o do fundo cosmol√≥gico"""
        # Retorna dicion√°rio com: a, z, H, Omega_*, etc.
        pass
</code></pre>
                
                <p style="text-align: center; margin-top: 20px; color: #999;">
                    [Ver arquivo completo clicando em "üî¨ cosmology.py" acima]
                </p>
            </div>
            
            <!-- app.py -->
            <div id="app" class="file-section">
                <div class="file-header">
                    <h2>üé® app.py</h2>
                    <p>Interface Streamlit interativa para simula√ß√µes cosmol√≥gicas</p>
                </div>
                
                <div class="description">
                    <h3>üìù Descri√ß√£o</h3>
                    <ul>
                        <li>Interface web completa com Streamlit</li>
                        <li>Controles interativos para par√¢metros cosmol√≥gicos</li>
                        <li>Gr√°ficos interativos com Plotly</li>
                        <li>4 abas de resultados: Densidade, Hubble, Campos, Exporta√ß√£o</li>
                        <li>Download de dados em CSV</li>
                    </ul>
                </div>
                
                <pre><code class="language-python">"""
FDM + Quintessence Cosmology Simulator
Interface Streamlit para evolu√ß√£o de fundo cosmol√≥gico
"""

import streamlit as st
import numpy as np
import plotly.graph_objects as go
from plotly.subplots import make_subplots
import pandas as pd
from cosmology import CosmologyParams, BackgroundEvolution

# Configura√ß√£o da p√°gina
st.set_page_config(
    page_title="FDM + Quintessence Cosmology",
    page_icon="üåå",
    layout="wide"
)

st.title("Evolu√ß√£o de Fundo Cosmol√≥gico")
st.markdown("""
**Modelo de Setor Escuro Din√¢mico: FDM + Quintess√™ncia**

Com base na modifica√ß√£o CLASS de Silvio A. Corr√™a Junior
""")

# Se√ß√£o de par√¢metros
col1, col2 = st.columns([1, 1])

with col1:
    st.subheader("Par√¢metros Cosmol√≥gicos Padr√£o")
    h = st.slider("Par√¢metro de Hubble (h)", 0.5, 0.8, 0.67)
    Omega_b = st.slider("Œ©_b (B√°rions)", 0.01, 0.10, 0.05)
    Omega_cdm = st.slider("Œ©_cdm (Mat√©ria Escura Fria)", 0.0, 0.35, 0.25)

with col2:
    st.subheader("Configura√ß√£o do Setor Escuro")
    model_type = st.radio(
        "Modelo",
        ["ŒõCDM", "Quintess√™ncia", "FDM", "FDM + Quintess√™ncia"]
    )

# Bot√£o para rodar simula√ß√£o
if st.button("Rodar Simula√ß√£o", type="primary"):
    params = CosmologyParams(
        h=h,
        Omega_b=Omega_b,
        Omega_cdm=Omega_cdm,
    )
    bg = BackgroundEvolution(params)
    results = bg.solve()
    
    # Abas de resultados
    tab1, tab2, tab3, tab4 = st.tabs([
        "Evolu√ß√£o de Densidade",
        "Par√¢metro de Hubble",
        "Campos Escalares",
        "Exporta√ß√£o de Dados"
    ])
    
    with tab1:
        st.subheader("Par√¢metros de Densidade vs Desvio para Vermelho")
        # Gr√°fico com Plotly
        
    with tab2:
        st.subheader("Evolu√ß√£o do Par√¢metro de Hubble")
        
    with tab3:
        st.subheader("Evolu√ß√£o dos Campos Escalares")
        
    with tab4:
        st.subheader("Exporta√ß√£o de Dados")
        st.download_button("Baixar CSV", data=csv_data)
</code></pre>
                
                <p style="text-align: center; margin-top: 20px; color: #999;">
                    [Ver arquivo completo clicando em "üé® app.py" acima]
                </p>
            </div>
            
            <!-- Equa√ß√µes -->
            <div id="eqs" class="file-section">
                <div class="file-header">
                    <h2>‚öôÔ∏è Equa√ß√µes Cosmol√≥gicas Implementadas</h2>
                    <p>Fundamento matem√°tico do simulador</p>
                </div>
                
                <div class="description">
                    <h3>1. Equa√ß√£o de Friedmann</h3>
                    <p style="font-family: 'Courier New', monospace; margin: 10px 0; padding: 10px; background: white; border-radius: 3px;">
                        H¬≤(a)/H‚ÇÄ¬≤ = Œ£·µ¢ Œ©·µ¢ a^(n·µ¢) + Œ©_K a¬≤
                    </p>
                    <p>Onde:</p>
                    <ul style="margin-left: 20px;">
                        <li>i = {r, m, Œõ/œÜ, œà} (radia√ß√£o, mat√©ria, DE, FDM)</li>
                        <li>n_r = -4, n_m = -3, n_Œõ = 0</li>
                    </ul>
                </div>
                
                <div class="description">
                    <h3>2. Quintess√™ncia (PNGB)</h3>
                    <p style="font-family: 'Courier New', monospace; margin: 10px 0; padding: 10px; background: white; border-radius: 3px;">
                        V(œÜ) = M‚Å¥[1 + cos(œÜ/f)]
                    </p>
                    <p>Equa√ß√£o de Klein-Gordon:</p>
                    <p style="font-family: 'Courier New', monospace; margin: 10px 0; padding: 10px; background: white; border-radius: 3px;">
                        œÜ'' + 3HœÜ' + dV/dœÜ = 0
                    </p>
                </div>
                
                <div class="description">
                    <h3>3. Fuzzy Dark Matter</h3>
                    <p style="font-family: 'Courier New', monospace; margin: 10px 0; padding: 10px; background: white; border-radius: 3px;">
                        V(œà) = ¬Ωm¬≤œà¬≤
                    </p>
                    <p>Comportamento:</p>
                    <ul style="margin-left: 20px;">
                        <li>a &lt; a_osc: congelado, w ‚âà -1 (como energia escura)</li>
                        <li>a > a_osc: oscilando, w ‚âà 0 (como mat√©ria)</li>
                    </ul>
                    <p style="margin-top: 10px;">Escala de transi√ß√£o: a_osc = ‚àö(H‚ÇÄ/m)</p>
                </div>
                
                <div class="description">
                    <h3>4. Par√¢metros de Densidade</h3>
                    <p style="font-family: 'Courier New', monospace; margin: 10px 0; padding: 10px; background: white; border-radius: 3px;">
                        Œ©_i(a) = œÅ·µ¢(a) / œÅ_crit(a) = Œ©_{i,0} H‚ÇÄ¬≤ / (a^(n·µ¢) H¬≤(a))
                    </p>
                </div>
                
                <div class="description">
                    <h3>5. Vari√°vel de Integra√ß√£o</h3>
                    <p style="margin: 10px 0;">
                        Para melhor estabilidade num√©rica, a integra√ß√£o √© feita em <strong>log(a)</strong>:
                    </p>
                    <p style="font-family: 'Courier New', monospace; margin: 10px 0; padding: 10px; background: white; border-radius: 3px;">
                        d/d(ln a) = (1/H) d/dt
                    </p>
                    <p style="margin-top: 10px;">
                        M√©todo: RK45 (Runge-Kutta 4¬™/5¬™ ordem)
                    </p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>FDM + Quintessence Cosmology Simulator | Baseado em CLASS | Autor: Silvio A. Corr√™a Junior</p>
            <p style="margin-top: 10px; font-size: 0.9em;">
                <a href="https://github.com/talksilviojr/fdm-quintessence-class" style="color: #667eea; text-decoration: none;">GitHub Repository</a> | 
                <a href="https://doi.org/10.5281/zenodo.17566560" style="color: #667eea; text-decoration: none;">Paper</a>
            </p>
        </footer>
    </div>
    
    <script>
        function showSection(sectionId) {
            // Ocultar todas as se√ß√µes
            const sections = document.querySelectorAll('.file-section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Remover ativo de todos os bot√µes
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            // Mostrar se√ß√£o selecionada
            document.getElementById(sectionId).classList.add('active');
            
            // Ativar bot√£o correspondente
            event.target.classList.add('active');
            
            // Destacar sintaxe
            document.querySelectorAll('pre code').forEach(el => {
                hljs.highlightElement(el);
            });
        }
        
        // Destacar sintaxe ao carregar
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('pre code').forEach(el => {
                hljs.highlightElement(el);
            });
        });
    </script>
</body>
</html>
